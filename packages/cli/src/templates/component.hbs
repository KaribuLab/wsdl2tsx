import { soap, ns } from "@karibulab/wsdl2tsx-runtime";

{{#each namespaces}}
const {{@key}} = ns("{{@key}}", [{{tagNamesArray this}}] as const);
{{/each}}

{{#each simpleTypes}}
export type {{pascalCase name}} = {{tsType}}
{{/each}}

export interface {{pascalCase requestType}}Props {
{{#each propsInterface.properties}}
	{{camelCase name}}: {{type}}{{#unless @last}},{{/unless}}
{{/each}}
}

{{#each interfaces}}
export interface {{pascalCase name}} {
{{#each properties}}
	{{camelCase name}}{{#if (eq modifier "?")}}?{{/if}}: {{type}}{{#if (eq modifier "[]")}}[]{{/if}}{{#unless @last}},{{/unless}}
{{/each}}
}
{{/each}}

{{#if responseType}}
export interface {{pascalCase responseType}}Props {
{{#each responsePropsInterface.properties}}
	{{camelCase name}}: {{type}}{{#unless @last}},{{/unless}}
{{/each}}
}
{{/if}}

export function {{pascalCase requestType}}(props: {{pascalCase requestType}}Props) {
{{#if unqualifiedTags}}
{{#each unqualifiedTags}}
    const {{this}} = () => "{{this}}";
{{/each}}
{{/if}}
    return <soap.Envelope xmlns:soap="{{soapNamespaceURI}}"
    {{xmlnsAttributes xmlnsAttributes}}>
    <soap.Header>
    {{#if headers}}
    {{#each headers}}
    {{{xmlCode}}}
    {{/each}}
    {{/if}}
    </soap.Header>
    <soap.Body>
    {{{xmlBody}}}
    </soap.Body>
</soap.Envelope>
}
